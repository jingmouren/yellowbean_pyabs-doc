模型库（alpha）
====

现金流模型库是集中化的现金流模型仓库，abs用户可以通过API调用获取已经经过测试验证的现金流模型。

.. note::

   通过Python发起Web API调用,从服务器中获取已经持久化的现金流模型对象。


范围
----
* 模型库目前支持订阅模式
    * 通过邮件 (见 “支持”页面)
    * 微信公众号(微信：`ABS工匠`)
* 建模范围：
    - 银行间市场汽车贷款，住房贷款类产品
    - 如提供交易材料情况下的非循环私募产品

使用方式 
----

1. 调用接口

.. code-block:: python

    from absbox.local.china import 信贷ABS
    信贷ABS.pull("TEST","/local/disk/path",url="https://asset-backed.org/library")
    # 注意，只有建模过的文件才能通过API下载。

2. 分析

本地文件会产生一个 ``.obj`` 结尾的文件。测试案例下载文件为 `test01.obj`

3. 载入

.. code-block:: python

  ...
  from absbox.local.china import 信贷ABS
  deal = 信贷ABS.load("path/to/test01.obj")
  #信贷ABS(名称='TEST01', 日期=('2021-03-01', '2021-06-15', '2021-07-26'),
  #兑付频率='每月', 资产池={'清单': [['按揭贷款', {'放款金额': 120, '放款利率': ['固定', 0.045], '初始期限': 30, '频率': '每月', '类型': '等额本金', '放款日': '2021-02-01'}, {'当前余额': 120, '当前利率': 0.08, '剩余期限': 20, '状态': '正常'}]]}
  #, 账户=(('账户01', {'余额': 0}),),
  #债券=(('A1', {'当前余额': 100, '当前利率': 0.07, '初始余额': 100, '初始利率': 0.07, '起息日': '2020-01-03', '利率': {'固定': 0.08}, '债券类型': {'过手摊还': None}}), ('B', {'当前余额': 20, '当前利率': 0.0, '初始余额': 100, '初始利率': 0.07, '起息日': '2020-01-03', '利率': {'固定': 0.0}, '债券类型': {'权益': None}}))
  #, 费用=(), 分配规则={'未违约': [['支付利息', '账户01', ['A1']], ['支付本金', '账户01', ['A1']], ['支付本金', '账户01', ['B']], ['支付收益', '账户01', 'B']]},
  #归集规则=(['利息回款', '账户01'], ['本金回款', '账户01'], ['早偿回款', '账户01'],
  #['回收回款', '账户01']), 清仓回购=None)

